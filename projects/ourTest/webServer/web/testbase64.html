<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <input type="file" accept='image/*' id="file"><br>
    <!--<div id=test>
    </div>
    图片: <img src="" id="img1" class='file-preview-image' width="100px" height="100">-->
    <div id="content" style="height: 100%; width: 100%"></div>
</body>
</html>

<script>
    document.querySelector("#file").addEventListener("change", function () {
        var file = document.querySelector("#file").files[0];
        var reader = new FileReader()
        reader.readAsDataURL(file)
        reader.onload = res => {
            this.src=res.target.result
            var img = new Image()
            img.src = res.target.result
            //document.getElementById('test').innerHTML = `<img src=${img.src}` id="img1" class='file-preview-image' width="100px" height="100">`;
            //document.getElementById('img1').setAttribute("src", `${img.src}`);
            document.getElementById('content').style.background = `url( ${img.src})`
            // getBase64Image(img)
        };


    })

    function getBase64Image(img) {
        var canvas = document.createElement('canvas');
        canvas.height = img.height;
        canvas.width = img.width;
        var ctx = canvas.getContext('2d');
        ctx.drawImage(img, 0, 0, img.width, img.height);
        document.getElementById('test').appendChild(canvas)
        var ext = img.src.substring(img.src.lastIndexOf('.') + 1).toLowerCase();
        var dataURL = canvas.toDataURL('image/' + ext);
        return dataURL
    }
</script>